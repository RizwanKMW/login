(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{"./actions/clearRecoverPasswordSent.js":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,r=a("./actions/const.js"),o=(n=r)&&n.__esModule?n:{default:n};t.default=function(){return{type:o.default.CLEAR_RECOVER_PASSWORD_SENT,payload:{}}}},"./actions/fakePushState.js":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,r=a("./actions/const.js"),o=(n=r)&&n.__esModule?n:{default:n};t.default=function(e){return{type:o.default.FAKE_PUSH_STATE,payload:{pushTo:e}}}},"./actions/formRedirect.js":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=o(a("./actions/hardRedirect.js")),r=o(a("./actions/const.js"));function o(e){return e&&e.__esModule?e:{default:e}}t.default=function(e,t){return t?(0,n.default)(e):{type:r.default.FORM_REDIRECT,payload:{},options:{redirectURL:e}}}},"./actions/formSubmitFailed.js":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,r=a("./actions/const.js"),o=(n=r)&&n.__esModule?n:{default:n};t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{type:o.default.FORM_SUBMIT_FAILED,payload:e}}},"./actions/hardRedirect.js":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=o(a("./config/dist.js")),r=o(a("./actions/const.js"));function o(e){return e&&e.__esModule?e:{default:e}}t.default=function(e){if(!e)throw new TypeError("redirectUrl is required","src/actions/hardRedirect.js");return"test"!==n.default.appEnv&&(window.location=e),{type:r.default.HARD_REDIRECT,payload:{redirectedTo:e}}}},"./epics/amplitude.js":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=u(a("../node_modules/babel-runtime/helpers/extends.js")),r=u(a("../node_modules/@cabify-dev/redux-amplitude-epic/es2015/index.js")),o=u(a("./config/dist.js")),s=u(a("./actions/const.js")),i=u(a("./lib/AuthenticationTypes.js"));function u(e){return e&&e.__esModule?e:{default:e}}var d=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,n.default)({source:"app",application:"profile",login_type:"email",oauth_application_id:e.oAuthApplication&&e.oAuthApplication.uuid},t)},l=[{actions:[s.default.REGISTER_FULFILLED],event:{name:"signup-success",getData:function(){return function(e){return d(e)}}()}},{actions:[s.default.REGISTER_FAILED,s.default.REGISTER_TIMEOUT],event:{name:"signup-failed",getData:function(){return function(e,t){var a=t.type;return d(e,{fail_reason:a===s.default.REGISTER_FAILED?e.currentForm.errors:"timeout"})}}()}},{actions:[s.default.SUBMIT_RECOVER_PASSWORD_FULFILLED],event:{name:"login-recover_password_success",getData:function(){return function(e){return d(e)}}()}},{actions:[s.default.SUBMIT_RECOVER_PASSWORD_FAILED,s.default.SUBMIT_RECOVER_PASSWORD_TIMEOUT],event:{name:"login-recover_password_fail",getData:function(){return function(e,t){var a=t.type;return d(e,{fail_reason:a===s.default.SUBMIT_RECOVER_PASSWORD_FAILED?e.currentForm.errors:"timeout"})}}()}},{actions:[s.default.LOGIN_FULFILLED],event:{name:"login-success",getData:function(){return function(e){return d(e)}}()}},{actions:[s.default.LOGIN_FAILED,s.default.LOGIN_TIMEOUT],event:{name:"login-fail",getData:function(){return function(e,t){var a=t.type;return d(e,{user_fleet_role:"none-define!",fail_reason:a===s.default.LOGIN_FAILED?e.currentForm.errors:"timeout"})}}()}},{actions:[s.default.SMS_VERIFICATION],event:{name:"phone_verification_launch",getData:function(){return function(e){return d(e,{})}}()}},{actions:[s.default.SMS_VERIFICATION_FULFILLED],event:{name:"phone_verification_success",getData:function(){return function(e){return d(e,{})}}()}},{actions:[s.default.SMS_VERIFICATION_FAILED],event:{name:"phone_verification_fail",getData:function(){return function(e){return d(e,{fail_reason:"bad code"})}}()}},{actions:[s.default.SMS_VERIFICATION_INVALID],event:{name:"phone_verification_fail",getData:function(){return function(e){return d(e,{fail_reason:"error"})}}()}},{actions:[s.default.SUBMIT_EMAIL_LOGIN_FULFILLED],event:{name:function(){return function(e){return e.payload.authentication===i.default.REGISTER?"login-email_fail":"login-email_success"}}(),getData:function(){return function(e,t){var a=t.payload.authentication;return d(e,{reason:a===i.default.REGISTER?"unknown_email":void 0})}}()}},{actions:[s.default.SUBMIT_EMAIL_LOGIN_FAILED,s.default.SUBMIT_EMAIL_LOGIN_TIMEOUT],event:{name:"login-email_fail",getData:function(){return function(e,t){return d(e,{fail_reason:t.type===s.default.SUBMIT_EMAIL_LOGIN_FAILED?e.currentForm.errors:"timeout"})}}()}},{actions:[s.default.SUBMIT_EMAIL_FULFILLED],event:{name:function(){return function(e){return e.payload.authentication===i.default.PASSWORD?"signup-email_fail":"signup-email_success"}}(),getData:function(){return function(e,t){var a=t.payload.authentication;return d(e,{reason:a===i.default.PASSWORD?"existing_email":void 0})}}()}},{actions:[s.default.SUBMIT_EMAIL_FAILED,s.default.SUBMIT_EMAIL_TIMEOUT],event:{name:"signup-email_fail",getData:function(){return function(e,t){return d(e,{fail_reason:t.type===s.default.SUBMIT_EMAIL_LOGIN_FAILED?e.currentForm.errors:"timeout"})}}()}},{actions:[s.default.BUTTON_TAP,s.default.SCREEN_VIEW,s.default.GENERIC],event:{name:function(){return function(e){return e.payload.reason}}(),getData:function(){return function(e,t){var a=t.payload.properties;return d(e,a)}}()}}];t.default=(0,r.default)(o.default.amplitudeToken,l,function(e){return e.device&&(e.device.adid||e.device.uuid)?{deviceId:e.device.adid||e.device.uuid,platform:e.device.system_name}:null})},"./epics/asyncEpics.js":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=l(a("./epics/routing.js")),r=l(a("./epics/recoverPassword.js")),o=l(a("./epics/amplitude.js")),s=l(a("./epics/formValidationsNormalizer.js")),i=l(a("./epics/formRedirector.js")),u=l(a("./epics/successRedirector.js")),d=l(a("./epics/providerRedirector.js"));function l(e){return e&&e.__esModule?e:{default:e}}t.default=[n.default,r.default,o.default,s.default,i.default,u.default,d.default]},"./epics/formRedirector.js":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=_(a("../node_modules/babel-runtime/core-js/object/values.js")),r=_(a("../node_modules/babel-runtime/helpers/toConsumableArray.js")),o=a("../node_modules/rxjs/_esm5/index.js"),s=a("../node_modules/rxjs/_esm5/operators/index.js"),i=a("../node_modules/redux-observable/lib/esm/index.js"),u=a("./actions/auth/const.js"),d=_(a("./routes.js")),l=a("./lib/utils.js"),c=_(a("./actions/formRedirect.js")),f=_(a("./lib/AuthenticationTypes.js"));function _(e){return e&&e.__esModule?e:{default:e}}var p=function(e){var t=void 0;return e.errors&&e.errors.user&&e.errors.user.includes("invalid")&&(t=d.default.error),t},E=[].concat((0,r.default)((0,n.default)(u.AuthResponseFulfilledActions)),(0,r.default)((0,n.default)(u.AuthResponseFailedActions)));t.default=function(e){return e.pipe(i.ofType.apply(void 0,(0,r.default)(E)),(0,s.mergeMap)(function(e){var t=void 0,a=e.payload;switch(e.type){case u.AuthResponseFulfilledActions.SUBMIT_EMAIL_FULFILLED:switch(a.authentication){case f.default.REGISTER:t=d.default.register;break;case f.default.PASSWORD:t=d.default.verifyPassword;break;default:t=void 0}break;case u.AuthResponseFulfilledActions.SUBMIT_EMAIL_LOGIN_FULFILLED:a.authentication===f.default.PASSWORD&&(t=d.default.verifyPassword);break;case u.AuthResponseFulfilledActions.LOGIN_FULFILLED:case u.AuthResponseFulfilledActions.REGISTER_FULFILLED:case u.AuthResponseFulfilledActions.SUBMIT_RESTORE_PASSWORD_FULFILLED:t=d.default.successfulLogin;break;case u.AuthResponseFailedActions.REGISTER_FAILED:t=a.errors&&a.errors.email&&a.errors.email.indexOf("is already taken")>=0?d.default.verifyPassword:p(a);break;case u.AuthResponseFulfilledActions.SUBMIT_RECOVER_PASSWORD_FULFILLED:t=d.default.verifyPasswordRestoreCode;break;case u.AuthResponseFailedActions.LOGIN_FAILED:t=p(a);break;case u.AuthResponseFulfilledActions.SUBMIT_RESTORE_PASSWORD_CODE_FULFILLED:t=d.default.restorePassword;break;default:t=void 0}return t?(t=(0,l.linkPath)(t),(0,o.of)((0,c.default)(t))):o.NEVER}))}},"./epics/formValidationsNormalizer.js":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=p(a("../node_modules/babel-runtime/helpers/extends.js")),r=p(a("../node_modules/babel-runtime/helpers/toConsumableArray.js")),o=p(a("../node_modules/babel-runtime/core-js/object/values.js")),s=a("../node_modules/rxjs/_esm5/index.js"),i=a("../node_modules/redux-observable/lib/esm/index.js"),u=a("../node_modules/rxjs/_esm5/operators/index.js"),d=p(a("./actions/const.js")),l=a("./actions/auth/const.js"),c=p(a("./actions/formSubmitFailed.js")),f=p(a("./lib/AuthenticationTypes.js")),_=a("./lib/utils.js");function p(e){return e&&e.__esModule?e:{default:e}}var E=(0,o.default)(l.AuthResponseTimeoutActions),I=[d.default.LOGIN_FAILED,d.default.REGISTER_FAILED,d.default.SMS_VERIFICATION_FAILED,d.default.SUBMIT_EMAIL_FAILED,d.default.SUBMIT_EMAIL_LOGIN_FAILED,d.default.SUBMIT_EMAIL_LOGIN_FULFILLED,d.default.SUBMIT_RECOVER_PASSWORD_FAILED,d.default.SUBMIT_RESTORE_PASSWORD_CODE_FAILED,d.default.SUBMIT_RESTORE_PASSWORD].concat((0,r.default)(E));t.default=function(e){return e.pipe(i.ofType.apply(void 0,(0,r.default)(I)),(0,u.mergeMap)(function(e){var t=e.type,a=e.payload,r=void 0;switch(t){case d.default.LOGIN_FAILED:r=function(e){return e.errors&&e.errors.user&&e.errors.user.includes("invalid")?(0,n.default)({},e.errors,{user:["disabled"]}):e.errors}(a);break;case d.default.REGISTER_FAILED:r=function(e){var t=e.errors||{};return e.errors?(e.errors.email&&(t.email=["email"]),e.errors.mobile_num&&(t.mobile_num=["validating_sms_error"])):(0,_.isFakError)(e.error)&&(t.mobile_num=["validating_sms_error"]),t}(a);break;case d.default.SMS_VERIFICATION_FAILED:r={mobile_num:["sms_validation_failed"]};break;case d.default.SUBMIT_EMAIL_FAILED:case d.default.SUBMIT_RECOVER_PASSWORD_FAILED:r={email:["invalid"]};break;case d.default.SUBMIT_RESTORE_PASSWORD_CODE_FAILED:r={restore_password_code:["invalid"]};break;case d.default.SUBMIT_RESTORE_PASSWORD:a.body.password!==a.body.password_confirmation&&(r={password_confirmation:["invalid"]});break;case d.default.SUBMIT_RESTORE_PASSWORD_FAILED:a.errors&&a.errors.password_confirmation&&(r={password_confirmation:["invalid"]});break;case d.default.SUBMIT_EMAIL_LOGIN_FAILED:r={email:["invalid"]};break;case d.default.SUBMIT_EMAIL_LOGIN_FULFILLED:a.authentication===f.default.REGISTER&&(r={email:["email_doesnt_exist"]})}if(r){var o=(0,n.default)({},a,{errors:(0,n.default)({},a.errors,r)});return(0,s.of)((0,c.default)(o))}return E.includes(t)?(0,s.of)((0,c.default)()):s.NEVER}))}},"./epics/providerRedirector.js":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=d(a("../node_modules/babel-runtime/helpers/slicedToArray.js")),r=a("../node_modules/redux-observable/lib/esm/index.js"),o=a("../node_modules/rxjs/_esm5/operators/index.js"),s=d(a("./actions/hardRedirect.js")),i=a("./actions/auth/const.js"),u=d(a("./lib/AuthenticationTypes.js"));function d(e){return e&&e.__esModule?e:{default:e}}var l=[i.AuthResponseActions.SUBMIT_EMAIL_FULFILLED,i.AuthResponseActions.SUBMIT_EMAIL_LOGIN_FULFILLED];t.default=function(e,t){return e.pipe(r.ofType.apply(void 0,l),(0,o.withLatestFrom)(t),(0,o.filter)(function(e){var t=(0,n.default)(e,1)[0].payload.authentication;return t&&t===u.default.PROVIDER}),(0,o.map)(function(e){var t=(0,n.default)(e,2)[1];return(0,s.default)(t.redirectUrl)}))}},"./epics/recoverPassword.js":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=u(a("../node_modules/babel-runtime/helpers/slicedToArray.js")),r=a("../node_modules/rxjs/_esm5/index.js"),o=a("../node_modules/rxjs/_esm5/operators/index.js"),s=u(a("./actions/const.js")),i=u(a("./actions/clearRecoverPasswordSent.js"));function u(e){return e&&e.__esModule?e:{default:e}}t.default=function(e,t){return e.ofType(s.default.SUBMIT_RECOVER_PASSWORD_FULFILLED,s.default.RESEND_RECOVER_PASSWORD_FULFILLED).pipe((0,o.withLatestFrom)(t),(0,o.mergeMap)(function(e){var t=(0,n.default)(e,2)[1].recoverPassword.delayTime;return(0,r.of)((0,i.default)()).pipe((0,o.delay)(t))}))}},"./epics/routing.js":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=f(a("../node_modules/babel-runtime/helpers/extends.js")),r=f(a("../node_modules/babel-runtime/helpers/slicedToArray.js")),o=f(a("../node_modules/babel-runtime/core-js/json/stringify.js")),s=a("../node_modules/rxjs/_esm5/index.js"),i=a("../node_modules/rxjs/_esm5/operators/index.js"),u=a("../node_modules/react-router-redux/es/index.js"),d=f(a("./actions/const.js")),l=f(a("./actions/fakePushState.js")),c=f(a("./actions/hardRedirect.js"));function f(e){return e&&e.__esModule?e:{default:e}}var _=[d.default.LOCATION_CHANGE,d.default.FAKE_PUSH_STATE];t.default=function(e,t){return e.ofType.apply(e,_).pipe((0,i.withLatestFrom)(t),(0,i.mergeMap)(function(e){var t=(0,r.default)(e,2),a=t[0],f=t[1],_=f.routing||{},p=_.browserHistory,E=_.blockedBack,I=_.currentPath,m=_.locationBeforeTransitions,L=_.disabledAppNavigation,A=s.NEVER;switch(a.type){case d.default.LOCATION_CHANGE:switch(a.payload.action){case"PUSH":if(p){var R=(0,u.replace)(function(e){var t=e.device,a=e.oAuthApplication.uuid,n=e.routing,r=n.currentPath,s=n.hideNavigation,i=n.disableAutofocus,u=n.disableLogoLink,d=encodeURIComponent((0,o.default)(t)),l=String(r)+"?browserHistory=true&noNavigation="+String(s)+"&noClickableLogo="+String(u);return l=(l=(l=l+"&device="+String(d))+"&disableAutofocus="+String(i))+"&oauth_application_uuid="+String(a)}(f));A=(0,s.of)(R)}!0===L&&(A=(0,s.of)((0,c.default)("app/hideNavigation")).pipe((0,i.merge)(A)));break;case"POP":if(E){var S=(0,l.default)(I);A=(0,s.of)(S).pipe((0,i.merge)(A))}}break;case d.default.FAKE_PUSH_STATE:p&&window.history.pushState((0,n.default)({},m),"",""+String(m.pathname)+String(window.location.search))}return A}),(0,i.distinctUntilChanged)())}},"./epics/successRedirector.js":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=u(a("../node_modules/babel-runtime/helpers/slicedToArray.js")),r=a("../node_modules/redux-observable/lib/esm/index.js"),o=a("../node_modules/rxjs/_esm5/operators/index.js"),s=u(a("./actions/hardRedirect.js")),i=a("./actions/auth/const.js");function u(e){return e&&e.__esModule?e:{default:e}}var d=[i.AuthResponseActions.LOGIN_FULFILLED,i.AuthResponseActions.REGISTER_FULFILLED,i.AuthResponseActions.SUBMIT_RESTORE_PASSWORD_FULFILLED];t.default=function(e,t){return e.pipe(r.ofType.apply(void 0,d),(0,o.withLatestFrom)(t),(0,o.delay)(100),(0,o.map)(function(e){var t=(0,n.default)(e,2)[1];return(0,s.default)(t.redirectUrl)}))}}}]);